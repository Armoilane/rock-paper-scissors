<!DOCTYPE html>
<html>
  <title>Rock Paper Scissors</title>

  <body>

    <div id="container">
      <button id="rock">Rock</button>
      <button id="paper">Paper</button>
      <button id="scissors">Scissors</button>
    </div>

    <div id="resultsContainer"></div>
    <div id="scoreContainer"></div>


    <script>


      let playerScore = 0;
      let computerScore = 0;
      let winner = '';

      let container = document.querySelector('#container');
      let buttons = document.querySelectorAll('button');

      buttons.forEach((button) => {

        button.addEventListener('click', (e) => {

          if (button.id == "rock") {

            let playerSelection = 0;
            playRound(computerSelection(),playerSelection);
            displayRoundWinner(winner);
            displayScore(playerScore,computerScore);

          } else if (button.id == "paper") {

            let playerSelection = 1;
            playRound(computerSelection(),playerSelection);
            displayRoundWinner(winner);
            displayScore(playerScore,computerScore);

          } else if (button.id == "scissors") {

            let playerSelection = 2;
            playRound(computerSelection(),playerSelection);
            displayRoundWinner(winner);
            displayScore(playerScore,computerScore);

          }

        });

      });


      function displayScore ( playerScore, computerScore ) {

        let scoreContainer = document.getElementById("scoreContainer");
        let scoreParagraph = document.createElement('p');

        scoreParagraph.classList.add('p');
        scoreParagraph.innerHTML = `Score is ${playerScore} for player and
                                    ${computerScore} for computer.`;
        scoreContainer.appendChild(scoreParagraph);
        // container.replaceChild(scoreDiv, scoreDiv);

      }

      function checkIfElementExists ( elementID ) {

        let element = document.getElementById(elementID);

        if ( typeof(element) !='undefined' && element != null ) {
          return true;
        } else {
          return false;
        }
      }


      function displayRoundWinner ( winner ) {

        let resultsContainer = document.getElementById("resultsContainer");
        let resultsParagraph = document.createElement('p');
        resultsParagraph.id = "resultsParagraph"; 
        resultsContainer.classList.add('p');

        let tieText = `Round tied! Replay!`;
        let winnerText = `The winner is ${winner}.`;

        let resultsParagraphExists = checkIfElementExists( "resultsParagraph" )

        if ( resultsParagraphExists === true ) {
          
        }

        

        if ( winner == 'tie' ) {
          
          document.getElementById('p').innerHTML = "Tie.";
          resultsContainer.appendChild(resultsParagraph);
          
//          container.replaceChild(resultsDiv, resultsDiv);

        } else {

          resultsParagraph.textContent = `The winner is ${winner}.`;
          resultsContainer.appendChild(resultsParagraph);
//          container.replaceChild(resultsDiv, resultsDiv);

        }

        

      }


      function playRound(computerSelection, playerSelection) {
      
        if (computerSelection == 0 && playerSelection == 1) {
          winner = 'player';
          playerScore++;
          return winner;
      
        } else if (computerSelection == 1 && playerSelection == 2) {
          winner = 'player';
          playerScore++;
          return winner;
      
        } else if (computerSelection == 2 && playerSelection == 0) {
          winner = 'player';
          playerScore++;
          return winner;
      
        } else if (computerSelection == 0 && playerSelection == 2) {
          winner = 'computer';
          computerScore++;
          return winner;
      
        } else if (computerSelection == 1 && playerSelection == 0) {
          winner = 'computer';
          computerScore++;
          return winner;
      
        } else if (computerSelection == 2 && playerSelection == 1) {
          winner = 'computer';
          computerScore++;
          return winner;
      
        } else {
          winner = 'tie'
          return winner;
        }
      
      }
      
      
      function computerSelection() {
      
        a = Math.floor(Math.random() * 3);
      
        switch (a) {
          case 0:
            return 0;
            break;
          case 1:
            return 1;
            break;
          case 2:
            return 2;
            break;
        }
      
      }





      function game() {
        
        while (playerScore <= 5 && computerScore <= 5) {
        
          playRound(computerSelection(), playerSelection());
      
          if (winner === 'tie') {
        
            console.log(`Round tied! Shuffle again you must!`);
        
          } else {
        
            console.log(`Round winner is ${winner}!`);
            console.log(`The score is Player ${playerScore} to ${computerScore}.`);
        
          }
        
        }
        
        if (playerScore > computerScore) {
        
          console.log(`Player won with a score of ${playerScore}!`)
        
        } else {
        
          console.log(`Computer won with a score of ${computerScore}`)
        
        }
       
      }


    </script>
  </body>
</html>